function acp_get_alpha_value_from_color(e){var a;return(e=e.replace(/ /g,"")).match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(a=100*parseFloat(e.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),a=parseInt(a)):a=100,a}function acp_update_alpha_value_on_color_control(e,a,t,i){var n,o,r;n=a.data("a8cIris"),o=a.data("wpWpColorPicker"),n._color._alpha=e,r=n._color.toString(),a.val(r),o.toggler.css({"background-color":r}),i&&acp_update_alpha_value_on_alpha_slider(e,t),a.wpColorPicker("color",r)}function acp_update_alpha_value_on_alpha_slider(e,a){a.slider("value",e),a.find(".ui-slider-handle").text(e.toString())}jQuery(document).ready(function(l){l(".customize-control.has-switchers").each(function(e){var a=l(this);1<=a.find(".responsive-switchers").length&&(a.parent().find("#"+a.attr("id")).addClass("active"),a.parent().find("#"+a.attr("id")+"_mobile").removeClass("active"),a.parent().find("#"+a.attr("id")+"_tablet").removeClass("active"))}),l(".customize-control .responsive-switchers button").on("click",function(e){var a=l(this),t=l(".responsive-switchers"),i=l(e.currentTarget).data("device"),n=l(".customize-control.has-switchers"),o=l(".wp-full-overlay"),r=l(".wp-full-overlay-footer .devices");t.find("button").removeClass("active"),t.find("button.preview-"+i).addClass("active"),n.removeClass("active"),"desktop"===i?n.parent().find("#"+n.attr("id")).addClass("active"):n.parent().find("#"+n.attr("id")+"_"+i).addClass("active"),n.removeClass("control-device-desktop control-device-tablet control-device-mobile").addClass("control-device-"+i),o.removeClass("preview-desktop preview-tablet preview-mobile").addClass("preview-"+i),r.find("button").removeClass("active").attr("aria-pressed",!1),r.find("button.preview-"+i).addClass("active").attr("aria-pressed",!0),a.hasClass("preview-desktop")&&n.toggleClass("responsive-switchers-open")}),l(".wp-full-overlay-footer .devices button").on("click",function(e){var a=l(this),t=l(".customize-control.has-switchers .responsive-switchers"),i=l(e.currentTarget).data("device"),n=l(".customize-control.has-switchers");t.find("button").removeClass("active"),t.find("button.preview-"+i).addClass("active"),n.removeClass("active"),"desktop"===i?n.parent().find("#"+n.attr("id")).addClass("active"):n.parent().find("#"+n.attr("id")+"_"+i).addClass("active"),n.removeClass("control-device-desktop control-device-tablet control-device-mobile").addClass("control-device-"+i),a.hasClass("preview-desktop")?n.removeClass("responsive-switchers-open"):n.addClass("responsive-switchers-open")})}),Color.prototype.toString=function(e){if("no-alpha"==e)return this.toCSS("rgba","1").replace(/\s+/g,"");if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(a.length<6)for(var t=6-a.length-1;0<=t;t--)a="0"+a;return"#"+a},jQuery(document).ready(function(n){n(".alpha-color-control").each(function(){var o,i,e,r,a,l,s,t;o=n(this),i=o.val().replace(/\s+/g,""),e=o.attr("data-show-opacity"),r=o.attr("data-default-color"),a={change:function(e,a){var t,i,n;t=o.attr("data-customize-setting-link"),i=o.wpColorPicker("color"),r==i&&(n=acp_get_alpha_value_from_color(i),s.find(".ui-slider-handle").text(n)),wp.customize(t,function(e){e.set(i)}),l.find(".transparency").css("background-color",a.color.toString("no-alpha"))},palettes:analyticaLocalize.colorPalettes},o.wpColorPicker(a),l=o.parents(".wp-picker-container:first"),n('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(l.find(".wp-picker-holder")),s=l.find(".alpha-slider"),t={create:function(e,a){var t=n(this).slider("value");n(this).find(".ui-slider-handle").text(t),n(this).siblings(".transparency ").css("background-color",i)},value:acp_get_alpha_value_from_color(i),range:"max",step:1,min:0,max:100,animate:300},s.slider(t),"true"==e&&s.find(".ui-slider-handle").addClass("show-opacity"),l.find(".min-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(0,o,s,!0)}),l.find(".max-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(100,o,s,!0)}),l.find(".iris-palette").on("click",function(e){var a,t;e.preventDefault(),acp_update_alpha_value_on_alpha_slider(t=acp_get_alpha_value_from_color(a=n(this).css("background-color")),s),100!=t&&(a=a.replace(/[^,]+(?=\))/,(t/100).toFixed(2))),o.wpColorPicker("color",a)}),l.find(".button.wp-picker-clear").on("click",function(e){e.preventDefault();var a=o.attr("data-customize-setting-link");o.wpColorPicker("color","#ffffff"),wp.customize(a,function(e){e.set("")}),acp_update_alpha_value_on_alpha_slider(100,s)}),l.find(".button.wp-picker-default").on("click",function(e){e.preventDefault(),acp_update_alpha_value_on_alpha_slider(acp_get_alpha_value_from_color(r),s)}),o.on("input",function(e){e.preventDefault(),acp_update_alpha_value_on_alpha_slider(acp_get_alpha_value_from_color(n(this).val()),s)}),s.slider().on("slide",function(e,a){acp_update_alpha_value_on_color_control(parseFloat(a.value)/100,o,s,!1),n(this).find(".ui-slider-handle").text(a.value)}),n(".iris-picker, .alpha-color-control").on("click",function(e){e.preventDefault()})})}),wp.customize.controlConstructor["dimensions-responsive"]=wp.customize.Control.extend({ready:function(){"use strict";var e,a=this.params.controls,t={},i=[];for(_.each(a,function(e,a){i.push(a)}),e=0;e<i.length;e++)t[i[e]]=this.setting._value[i[e]],this.updateDimensionsValue(i[e],t)},updateDimensionsValue:function(e,a){var t=this;t.container.on("change keyup paste","input.dimension-"+e,function(){a[e]=jQuery(this).val(),t.saveValue(a)})},saveValue:function(e){var t={};_.each(e,function(e,a){t[a]=e}),this.setting.set(t)}}),jQuery(document).ready(function(i){i(".analytica-linked").on("click",function(){var e=i(this);e.parent().parent(".dimension-wrap").prevAll().slice(0,4).find("input").removeClass("linked").attr("data-element",""),e.parent(".link-dimensions").removeClass("unlinked")}),i(".analytica-unlinked").on("click",function(){var e=i(this),a=e.data("element");e.parent().parent(".dimension-wrap").prevAll().slice(0,4).find("input").addClass("linked").attr("data-element",a),e.parent(".link-dimensions").addClass("unlinked")}),i(".dimension-wrap").on("input",".linked",function(){var e=i(this).attr("data-element"),t=i(this).val();i('.linked[ data-element="'+e+'" ]').each(function(e,a){i(this).val(t).change()})})}),wp.customize.controlConstructor["analytica-icon"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("change","input",function(){e.setting.set(jQuery(this).val())})}});